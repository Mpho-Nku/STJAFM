(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{1122:function(e,t,a){Promise.resolve().then(a.bind(a,6719))},6719:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var i=a(7437),n=a(2265),l=a(1180),r=a(7138);let s=n.forwardRef(function(e,t){let{title:a,titleId:i,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),a?n.createElement("title",{id:i},a):null,n.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}),c=n.forwardRef(function(e,t){let{title:a,titleId:i,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),a?n.createElement("title",{id:i},a):null,n.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}),d=n.forwardRef(function(e,t){let{title:a,titleId:i,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),a?n.createElement("title",{id:i},a):null,n.createElement("path",{fillRule:"evenodd",d:"M5.25 9a6.75 6.75 0 0 1 13.5 0v.75c0 2.123.8 4.057 2.118 5.52a.75.75 0 0 1-.297 1.206c-1.544.57-3.16.99-4.831 1.243a3.75 3.75 0 1 1-7.48 0 24.585 24.585 0 0 1-4.831-1.244.75.75 0 0 1-.298-1.205A8.217 8.217 0 0 0 5.25 9.75V9Zm4.502 8.9a2.25 2.25 0 1 0 4.496 0 25.057 25.057 0 0 1-4.496 0Z",clipRule:"evenodd"}))});function o(){let[e,t]=(0,n.useState)(null),[a,o]=(0,n.useState)([]),[u,h]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{(async()=>{var e,a,i;let{data:n}=await l.O.auth.getUser();if(t(n.user),!n.user)return;let[r,s,c]=await Promise.all([l.O.from("events").select("id,title,description,start_time,church_id").order("start_time",{ascending:!0}).limit(5),l.O.from("devotionals").select("id,title,description,created_at").order("created_at",{ascending:!1}).limit(5),l.O.from("announcements").select("id,title,description,created_at").order("created_at",{ascending:!1}).limit(5)]),d=[];null===(e=r.data)||void 0===e||e.forEach(e=>d.push({id:e.id,type:"event",title:e.title,description:e.description,date:e.start_time,church_id:e.church_id})),null===(a=s.data)||void 0===a||a.forEach(e=>d.push({id:e.id,type:"devotional",title:e.title,description:e.description,date:e.created_at})),null===(i=c.data)||void 0===i||i.forEach(e=>d.push({id:e.id,type:"announcement",title:e.title,description:e.description,date:e.created_at})),d.sort((e,t)=>new Date(t.date||"").getTime()-new Date(e.date||"").getTime()),o(d),h(!1)})()},[]),e)?u?(0,i.jsx)("div",{className:"p-6 text-center text-gray-600",children:"Loading your feed..."}):(0,i.jsxs)("div",{className:"max-w-2xl mx-auto p-4 space-y-4",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-blue-900",children:"Your Personalized Feed"}),0===a.length&&(0,i.jsx)("p",{className:"text-gray-500",children:"No updates yet. Check back soon!"}),a.map(e=>(0,i.jsxs)("div",{className:"p-4 rounded-lg shadow-md bg-white border border-gray-200 hover:shadow-lg transition",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-sm text-blue-700",children:["event"===e.type&&(0,i.jsx)(s,{className:"h-5 w-5"}),"devotional"===e.type&&(0,i.jsx)(c,{className:"h-5 w-5"}),"announcement"===e.type&&(0,i.jsx)(d,{className:"h-5 w-5"}),(0,i.jsx)("span",{className:"capitalize",children:e.type})]}),(0,i.jsx)("h2",{className:"font-semibold text-lg",children:e.title}),e.description&&(0,i.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.date&&(0,i.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.date).toLocaleString()}),"event"===e.type&&(0,i.jsx)(r.default,{href:"/churches/".concat(e.church_id),className:"text-sm text-blue-600 mt-2 inline-block hover:underline",children:"View Church â†’"})]},e.id))]}):(0,i.jsx)("div",{className:"p-6 text-center text-gray-600",children:"Please sign in to see your feed."})}},1180:function(e,t,a){"use strict";a.d(t,{O:function(){return i}});let i=(0,a(4392).createClientComponentClient)()}},function(e){e.O(0,[392,138,971,23,744],function(){return e(e.s=1122)}),_N_E=e.O()}]);